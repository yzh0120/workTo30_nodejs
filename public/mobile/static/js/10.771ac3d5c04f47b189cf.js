webpackJsonp([10],{fjKl:function(t,e){},fswD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("NYxO"),r=s("oslt"),o=Object(n.a)("list"),c={name:"",data:function(){return{list:[],loading:!1,isLoading:!1,finished:!1}},filters:{},directives:{focus:{inserted:function(t){t.focus()}}},methods:i()({onRefresh:function(){this.list.length=0,this.onLoad()}},o.mapMutations({ResetHandler:"ResetHandler"}),{getArticle:function(t,e){var s=this;this.$api.article.search(t).then(function(t){s.isLoading=!1,s.loading=!1,console.log(t.data),"no_data"==t.data?s.finished=!0:t.data.finished?(s.finished=!0,s.getFn(t.data.result,e)):t.data.ok?s.getFn(t.data.result,e):s.finished=!0})},getFn:function(t,e){for(var s=this,a=0;a<t.length;a++){t[a].article_publish_time=this.$formatDate(new Date(t[a].article_publish_time)),this.$refs.tempForsearch.innerHTML=t[a].article_content,t[a].article_content=this.$refs.tempForsearch.textContent,t[a].hasImg={hasImgONe:!1,hasImgTag:!1,imgArr:[]};var i=this.$refs.tempForsearch.getElementsByTagName("img");if(1==!!i[0])if(i.length<3)t[a].hasImg.hasImgONe=!0,t[a].hasImg.imgArr[0]=i[0].src;else{t[a].hasImg.hasImgTag=!0;for(var n=0;n<3;n++)t[a].hasImg.imgArr[n]=i[n].src}}switch(e){case 0:this.list=t;break;case 1:this.list=this.list.concat(t)}this.$nextTick(function(){for(var t=0;t<=s.list.length-1;t++)1==!!s.list[t].hasImg.hasImgONe?s.$refs["des"+t][0].classList.add("oneImg"):1==!!s.list[t].hasImg.hasImgTag?s.$refs["des"+t][0].classList.add("threeImg"):s.$refs["des"+t][0].classList.add("noImg")})},articleJump:function(t){this.$router.push({path:"/read",query:{articleId:t}})},onLoad:function(){if(1==!!this.list[0]){var t={time:this.list[this.list.length-1].article_publish_time,KeyWord:this.KeyWord};this.getArticle(t,1)}else{t={KeyWord:this.KeyWord};this.getArticle(t,0)}}}),computed:i()({},o.mapState({KeyWord:function(t){return t.KeyWord}}),o.mapState({Reset:function(t){return t.Reset}})),components:{UserTag:r.a},mounted:function(){},watch:{Reset:{handler:function(t,e){console.log(t,123),1==!!t&&(this.list.length=0,this.finished=!1,this.onLoad(),this.ResetHandler(!1))},immediate:!1}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"listBoss"},[s("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-list",{staticClass:"list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{ref:"tempForsearch",staticClass:"temp",attrs:{id:"articleYzhTemp"}}),t._v(" "),t._l(t.list,function(e,a){return s("div",{key:e.article_id,staticClass:"item",on:{click:function(s){return t.articleJump(e.article_id)}}},[s("UserTag",{attrs:{msgg:e}}),t._v(" "),s("div",{staticClass:"middle"},[s("div",{staticClass:"title "},[t._v(t._s(e.article_title))]),t._v(" "),s("div",{staticClass:"ccc"},[s("div",{ref:"des"+a,refInFor:!0,staticClass:"content van-multi-ellipsis--l3"},[t._v(t._s(e.article_content))]),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:e.hasImg.hasImgONe,expression:"item.hasImg.hasImgONe"}],attrs:{src:e.hasImg.imgArr[0],alt:""}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasImg.hasImgTag,expression:"item.hasImg.hasImgTag"}],staticClass:"imgs"},t._l(e.hasImg.imgArr,function(t,e){return s("img",{key:e,staticClass:"hasImg",attrs:{src:t}})}),0)]),t._v(" "),s("div",{staticClass:"bottom"},[s("div",[s("i",{staticClass:"iconfont time"},[t._v("")]),t._v(" "),s("span",{staticClass:"spanOne"},[t._v(t._s(t._f("fTime")(e.article_publish_time)))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont eye"},[t._v("")]),t._v(" "),s("span",{staticClass:"spanOne"},[t._v(t._s(e.article_look_count))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont comment"},[t._v("")]),t._v(" "),s("span",{staticClass:"spanOne"},[t._v(t._s(e.article_comment_count))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont col"},[t._v("")]),t._v(" "),s("span",[t._v(t._s(e.article_col_count))])])])],1)})],2)],1)],1)},staticRenderFns:[]};var h=s("VU/8")(c,l,!1,function(t){s("fjKl")},"data-v-710c0358",null).exports,d=Object(n.a)("list"),m={name:"",data:function(){return{value:"",showSearch:!1}},methods:i()({},d.mapMutations({KeyWordHandler:"KeyWordHandler"}),d.mapMutations({ResetHandler:"ResetHandler"}),{onSearch:function(){0!=!!this.value?(this.ResetHandler(!0),this.KeyWordHandler(this.value),this.showSearch=!0):this.$tip("请输入关键词","warning")},back:function(){this.$router.back()}}),computed:{},components:{List:h},mounted:function(){},watch:{}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",autofocus:"",shape:"round"},on:{search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),s("List",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}]})],1)},staticRenderFns:[]};var f=s("VU/8")(m,u,!1,function(t){s("n8MH")},"data-v-13e8ca1f",null);e.default=f.exports},n8MH:function(t,e){}});
//# sourceMappingURL=10.771ac3d5c04f47b189cf.js.map