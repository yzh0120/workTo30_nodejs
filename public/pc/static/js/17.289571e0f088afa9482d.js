webpackJsonp([17],{"9B6d":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={name:"",activated:function(){this.firstEnter>1&&"/no"!=this.fromPath&&"/search"!=this.fromPath?(this.isBuffering=!0,this.list.length=0,this.onLoad()):this.firstEnter++},data:function(){return{firstEnter:0,list:[],loading:!1,isLoading:!1,finished:!1,listApi:["folAndFans","folAndFansMore"]}},methods:{mountedFn:function(){this.firstEnter++,this.isBuffering=!0},clickMe:function(t,s){this.$refs["child"+s][0].toOtherUser(t)},toOtherUser:function(t){console.log(t,"params"),this.$router.push({path:"/otherUser",query:{userId:t}})},getList:function(t,s){var e=this;this.$api.user.folAndFans(t).then(function(t){e.isBuffering=!1,e.loading=!1,e.isLoading=!1,e.finished=!1,console.log(t.data,"关注"),"no_list_login"==t.data?(e.finished=!0,e.$dialog.confirm({title:"您尚未登录",message:"需要跳转登录页吗?"}).then(function(){e.$router.push({path:"/login"})}).catch(function(){})):"no_data"==t.data?e.finished=!0:t.data.finished?(e.finished=!0,e.getFn(t.data.result,s)):t.data.ok?e.getFn(t.data.result,s):e.finished=!0})},getFn:function(t,s){switch(s){case 0:this.list=t;break;case 1:this.list=this.list.concat(t)}},onLoad:function(){var t={};switch(this.$route.query.folAndFans){case"follow":t={folAndFans:"follow"};break;case"fans":t={folAndFans:"fans"}}this.$route.query.otherUserId&&(t.otherUserId=this.$route.query.otherUserId),1==!!this.list[0]?(t.time=this.list[this.list.length-1].follow_time,this.getList(t,1)):this.getList(t,0)},onRefresh:function(){this.list.length=0,this.onLoad()}},computed:{fromPath:{get:function(){return this.$store._modulesNamespaceMap["path/"].context.state.fromPath},set:function(t){this.$store._modulesNamespaceMap["path/"].context.commit("fromPathHandler",t)}},isBuffering:{get:function(){return this.$store._modulesNamespaceMap["win/"].context.state.isBuffering},set:function(t){this.$store._modulesNamespaceMap["win/"].context.commit("isBufferingHandler",t)}}},components:{UserTag:e("oslt").a},mounted:function(){this.mountedFn()},watch:{}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"am- "},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("van-list",{staticClass:"list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,function(s,i){return e("div",{key:i,staticClass:"for",on:{click:function(s){return t.clickMe(s,i)}}},[e("UserTag",{ref:"child"+i,refInFor:!0,staticClass:"folAndFans",attrs:{msgg:s,toUserInfo:!0}})],1)}),0)],1)],1)},staticRenderFns:[]};var o=e("VU/8")(i,n,!1,function(t){e("ptV7")},"data-v-25cd1496",null);s.default=o.exports},ptV7:function(t,s){}});
//# sourceMappingURL=17.289571e0f088afa9482d.js.map