webpackJsonp([3],{AooG:function(t,i){},T87H:function(t,i,e){"use strict";var n=e("Dd8w"),r=e.n(n),a=e("NYxO"),s=Object(a.a)("notice"),o=Object(a.a)("grid"),d={name:"",data:function(){return{}},filters:{},methods:r()({},s.mapMutations({noticePlateArrHandler:"noticePlateArrHandler"}),{articleJump:function(t){t?this.$router.push({path:"/read",query:{articleId:t}}):this.$toast("文章飞到其他星球了")}}),computed:r()({},o.mapState({grid:function(t){return t.grid}}),s.mapState({noticePlateArr:function(t){return t.noticePlateArr}})),components:{},mounted:function(){var t=this,i={};if(void 0!==this.$route.query.plate)i.bidding_type=this.$route.query.plate;else if(this.$route.query.articleId){for(var e=0;e<this.grid.length;e++)this.grid[e].text==this.$route.query.article_plate&&(i.bidding_type=e);i.articleId=this.$route.query.articleId}this.$api.article.getNowBiddingPlate(i).then(function(i){t.noticePlateArrHandler(i.data.result)})},watch:{}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{},[t._l(t.noticePlateArr,function(i,n){return e("div",{key:n,staticClass:"noticeBox am-border",on:{click:function(e){return t.articleJump(i.bidding_article_id)}}},[t._m(0,!0),t._v(" "),e("div",{class:["van-ellipsis","right",0==i.bidding_article_id?"del":""]},[t._v("\n        "+t._s(t._f("fNoArticle")(i.tit))+"\n        ")])])}),t._v(" "),t._l(t.noticePlateArr,function(i,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:"/bidding"==t.$route.path,expression:'$route.path == "/bidding"'}],key:100+n,staticClass:"noticeBoxBox"},[t._v("\n      第"+t._s(n+1)+"名 : "),e("i",{staticClass:"iconfont fire"},[t._v("")]),t._v(t._s(i.bidding_price)+"\n  ")])})],2)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("div",[this._v("置顶")])])}]};var l=e("VU/8")(d,c,!1,function(t){e("oD7x")},"data-v-47ca55fd",null);i.a=l.exports},ZWRX:function(t,i){},islH:function(t,i,e){"use strict";var n=e("Dd8w"),r=e.n(n),a=e("NYxO"),s=Object(a.a)("notice"),o={name:"",data:function(){return{}},filters:{},methods:r()({},s.mapMutations({noticeArrHandler:"noticeArrHandler"}),{articleJump:function(t){t?this.$router.push({path:"/read",query:{articleId:t}}):this.$toast("文章飞到其他星球了")}}),computed:r()({},s.mapState({noticeArr:function(t){return t.noticeArr}})),components:{},mounted:function(){var t=this;this.$api.article.getNowBidding({}).then(function(i){t.noticeArrHandler(i.data.result)})},watch:{}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{},[t._l(t.noticeArr,function(i,n){return e("div",{key:n,staticClass:"noticeBox am-border",on:{click:function(e){return t.articleJump(i.bidding_article_id)}}},[t._m(0,!0),t._v(" "),e("div",{class:["van-ellipsis","right",0==i.bidding_article_id?"del_content":""]},[t._v("\n        "+t._s(t._f("fNoArticle")(i.tit))+"\n        ")])])}),t._v(" "),t._l(t.noticeArr,function(i,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:"/bidding"==t.$route.path,expression:'$route.path == "/bidding"'}],key:100+n,staticClass:"noticeBoxBox"},[t._v("\n      第"+t._s(n+1)+"名 : "),e("i",{staticClass:"iconfont fire"},[t._v("")]),t._v(t._s(i.bidding_price)+"\n  ")])})],2)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("div",[this._v("置顶")])])}]};var c=e("VU/8")(o,d,!1,function(t){e("ZWRX")},"data-v-744253a4",null);i.a=c.exports},oD7x:function(t,i){},vX6R:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("Dd8w"),r=e.n(n),a=e("islH"),s=e("T87H"),o=e("NYxO"),d=Object(o.a)("notice"),c=Object(o.a)("login"),l=Object(o.a)("grid"),u={name:"",data:function(){return{showPopupForBiddingModel:!1,inputVal:"",ws_bidding:!1,curArtBidding_price:0,curArtBiddingPlate_price:0,showPopupForPlate:!1,ws_biddingPlate:!1}},methods:r()({},c.mapMutations({setHandler:"setHandler"}),d.mapMutations({noticeArrHandler:"noticeArrHandler"}),d.mapMutations({noticePlateArrHandler:"noticePlateArrHandler"}),{bidding:function(t){switch(t){case 0:this.showPopupForBiddingModel=!0;break;case 1:this.showPopupForPlate=!0}},input:function(){this.inputVal=this.inputVal.replace(/[^\d]/g,""),console.log(this.inputVal)},confirmPlate:function(){var t=this;if(0!=!!this.hasLogin)if(0!=!!this.inputVal)if(this.inputVal>this.userInfo.user_gold)this.$toast("超出了你的钻石数量");else if(1!=!!this.ws_biddingPlate){this.ws_biddingPlate=!0;for(var i={num:this.inputVal,articleId:this.$route.query.articleId,articleUserId:this.$route.query.articleUserId},e=0;e<this.grid.length;e++)this.grid[e].text==this.$route.query.article_plate&&(i.bidding_type=e);this.showPopupForBiddingModel=!1,this.isDoing=!0,this.$api.article.biddingPlate(i).then(function(i){switch(t.isDoing=!1,t.ws_biddingPlate=!1,i.data){case"err":t.$toast("文章id和用户id匹配不成功!");break;case"success":break;default:i.data.bidding_price&&(t.curArtBiddingPlate_price=i.data.bidding_price),t.noticePlateArrHandler(i.data.result),t.setHandler(["user_gold",i.data.user_gold]),t.$toast("竞标成功!"),t.showPopupForPlate=!1}})}else this.$toast("请等待服务器响应");else this.$toast("打赏金额为空");else this.$toast("您尚未登录")},confirmReward:function(t){var i=this;if(0!=!!this.hasLogin)if(0!=!!this.inputVal)if(this.inputVal>this.userInfo.user_gold)this.$toast("超出了你的钻石数量");else if(1!=!!this.ws_bidding){this.ws_bidding=!0;var e={num:this.inputVal,articleId:this.$route.query.articleId,articleUserId:this.$route.query.articleUserId};this.showPopupForBiddingModel=!1,this.isDoing=!0,this.$api.article.bidding(e).then(function(t){switch(i.isDoing=!1,i.ws_bidding=!1,t.data){case"err":i.$toast("文章id和用户id匹配不成功!");break;case"success":break;default:t.data.bidding_price&&(i.curArtBidding_price=t.data.bidding_price),i.noticeArrHandler(t.data.result),i.setHandler(["user_gold",t.data.user_gold]),i.$toast("竞标成功!")}})}else this.$toast("请等待服务器响应");else this.$toast("打赏金额为空");else this.$toast("您尚未登录")}}),computed:r()({isBuffering:{get:function(){return this.$store._modulesNamespaceMap["win/"].context.state.isBuffering},set:function(t){this.$store._modulesNamespaceMap["win/"].context.commit("isBufferingHandler",t)}},isDoing:{get:function(){return this.$store._modulesNamespaceMap["win/"].context.state.isDoing},set:function(t){this.$store._modulesNamespaceMap["win/"].context.commit("isDoingHandler",t)}}},l.mapState({grid:function(t){return t.grid}}),c.mapState({hasLogin:function(t){return t.hasLogin}}),c.mapState({userInfo:function(t){return t.userInfo}})),components:{Notice:a.a,NoticePlate:s.a},mounted:function(){var t=this;this.isBuffering=!0;var i={articleId:this.$route.query.articleId};this.$api.article.getNowBidding(i).then(function(i){i.data.bidding_price&&(t.curArtBidding_price=i.data.bidding_price),t.noticeArrHandler(i.data.result)});for(var e={articleId:this.$route.query.articleId},n=0;n<this.grid.length;n++)this.grid[n].text==this.$route.query.article_plate&&(e.bidding_type=n);this.$api.article.getNowBiddingPlate(e).then(function(i){t.isBuffering=!1,i.data.bidding_price&&(t.curArtBiddingPlate_price=i.data.bidding_price),t.noticePlateArrHandler(i.data.result)})},watch:{},beforeRouteLeave:function(t,i,e){this.curArtBidding_price=0,this.curArtBiddingPlate_price=0,e()}},p={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"biddingBox am-biddingBox"},[e("Notice"),t._v(" "),e("div",{staticClass:"curArtBidding_price"},[t._v("\n    您当前文章的首页推荐竞标值为:"),e("i",{staticClass:"iconfont fire"},[t._v("")]),t._v(t._s(t.curArtBidding_price)+"\n  ")]),t._v(" "),e("van-button",{staticClass:"bidding",attrs:{type:"primary",size:"large"},on:{click:function(i){return t.bidding(0)}}},[t._v("竞标首页推荐位\n  ")]),t._v(" "),e("van-popup",{staticClass:"showPopupForBiddingModel",style:{height:"240px"},attrs:{position:"top"},model:{value:t.showPopupForBiddingModel,callback:function(i){t.showPopupForBiddingModel=i},expression:"showPopupForBiddingModel"}},[e("div",{staticClass:"tit"},[t._v("土豪,请消费")]),t._v(" "),e("div",{staticClass:"one"},[t._v(" 您的 "),e("i",{staticClass:"iconfont gold"},[t._v("")]),t._v(" 数量为:\n            "),e("span",{staticClass:"userGold"},[t._v(t._s(t.userInfo.user_gold)+" ")])]),t._v(" "),e("van-cell-group",[e("van-field",{attrs:{placeholder:"请输入您打赏的钻石数量"},on:{input:t.input},model:{value:t.inputVal,callback:function(i){t.inputVal=i},expression:"inputVal"}})],1),t._v(" "),e("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(i){return t.confirmReward()}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.ws_bidding,expression:"!ws_bidding"}]},[t._v("我要竞标")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.ws_bidding,expression:"ws_bidding"}]},[t._v("竞标中...")])])],1),t._v(" "),e("NoticePlate"),t._v(" "),e("div",{staticClass:"curArtBidding_price"},[t._v("\n    您当前文章的"+t._s(t.$route.query.article_plate)+"板块推荐竞标值为:"),e("i",{staticClass:"iconfont fire"},[t._v("")]),t._v(t._s(t.curArtBiddingPlate_price)+"\n  ")]),t._v(" "),e("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(i){return t.bidding(1)}}},[t._v("\n    竞标"+t._s(t.$route.query.article_plate)+"板块推荐位\n  ")]),t._v(" "),e("van-popup",{staticClass:"showPopupForBiddingModel",style:{height:"240px"},attrs:{position:"top"},model:{value:t.showPopupForPlate,callback:function(i){t.showPopupForPlate=i},expression:"showPopupForPlate"}},[e("div",{staticClass:"tit"},[t._v("土豪,请消费")]),t._v(" "),e("div",{staticClass:"one"},[t._v(" 您的 "),e("i",{staticClass:"iconfont gold"},[t._v("")]),t._v(" 数量为:\n            "),e("span",{staticClass:"userGold"},[t._v(t._s(t.userInfo.user_gold)+" ")])]),t._v(" "),e("van-cell-group",[e("van-field",{attrs:{placeholder:"请输入您打赏的钻石数量"},on:{input:t.input},model:{value:t.inputVal,callback:function(i){t.inputVal=i},expression:"inputVal"}})],1),t._v(" "),e("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(i){return t.confirmPlate()}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.ws_biddingPlate,expression:"!ws_biddingPlate"}]},[t._v("我要竞标")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.ws_biddingPlate,expression:"ws_biddingPlate"}]},[t._v("竞标中...")])])],1)],1)},staticRenderFns:[]};var _=e("VU/8")(u,p,!1,function(t){e("AooG")},"data-v-556105c2",null);i.default=_.exports}});
//# sourceMappingURL=3.fd98a5dd692d2b7bdafc.js.map